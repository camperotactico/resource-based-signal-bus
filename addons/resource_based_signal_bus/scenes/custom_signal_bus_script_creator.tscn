[gd_scene load_steps=7 format=3 uid="uid://of5af3ng1gf0"]

[ext_resource type="Script" uid="uid://gf5uvxa472ar" path="res://addons/resource_based_signal_bus/scripts/custom_signal_bus_script_creator/custom_signal_bus_script_creator.gd" id="1_dqea1"]
[ext_resource type="Texture2D" uid="uid://cl4yg33utlnlg" path="res://addons/resource_based_signal_bus/icons/ResourceBasedSignalBus.svg" id="1_qvtpa"]
[ext_resource type="PackedScene" uid="uid://brinlab3uvxdl" path="res://addons/resource_based_signal_bus/scenes/arguments_variant_types_editor.tscn" id="2_185c3"]
[ext_resource type="PackedScene" uid="uid://cnw0e7n6cp630" path="res://addons/resource_based_signal_bus/scenes/save_path_editor.tscn" id="2_i6g6p"]
[ext_resource type="Script" uid="uid://u3ufpv7r5puc" path="res://addons/resource_based_signal_bus/scripts/custom_signal_bus_script_creator/parameters_validator.gd" id="4_x7jcq"]
[ext_resource type="Script" uid="uid://w0073sydji0" path="res://addons/resource_based_signal_bus/scripts/custom_signal_bus_script_creator/utils/filesystem_scanner.gd" id="5_nbh7k"]

[node name="CustomSignalBusScriptCreator" type="Control" node_paths=PackedStringArray("parameters_validator")]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("1_dqea1")
parameters_validator = NodePath("ParametersValidator")

[node name="VBoxContainer" type="VBoxContainer" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="SavePathEditor" parent="VBoxContainer" instance=ExtResource("2_i6g6p")]
layout_mode = 2

[node name="EmptySpace1" type="Control" parent="VBoxContainer"]
custom_minimum_size = Vector2(0, 32)
layout_mode = 2

[node name="HSeparator" type="HSeparator" parent="VBoxContainer"]
layout_mode = 2

[node name="ArgumentsVariantTypesEditor" parent="VBoxContainer" instance=ExtResource("2_185c3")]
layout_mode = 2

[node name="EmptySpace2" type="Control" parent="VBoxContainer"]
custom_minimum_size = Vector2(0, 32)
layout_mode = 2

[node name="HSeparator2" type="HSeparator" parent="VBoxContainer"]
layout_mode = 2

[node name="PreviewRichTextLabel" type="RichTextLabel" parent="VBoxContainer"]
layout_mode = 2
bbcode_enabled = true
text = "Custom SignalBus Preview"
fit_content = true
scroll_active = false
horizontal_alignment = 1

[node name="SignalSignaturePreviewHBoxContainer" type="HBoxContainer" parent="VBoxContainer"]
layout_mode = 2

[node name="SignalSignaturePreviewTextLabel" type="Label" parent="VBoxContainer/SignalSignaturePreviewHBoxContainer"]
layout_mode = 2
text = "Signal Signature:"

[node name="SignalSignaturePreviewRichTextLabel" type="RichTextLabel" parent="VBoxContainer/SignalSignaturePreviewHBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
bbcode_enabled = true
text = "[i]signal _signal( arg0: bool )[/i]"
scroll_following = true
autowrap_mode = 0
horizontal_alignment = 2

[node name="ClassNamePreviewHBoxContainer" type="HBoxContainer" parent="VBoxContainer"]
layout_mode = 2

[node name="ClassNamePreviewTextLabel" type="Label" parent="VBoxContainer/ClassNamePreviewHBoxContainer"]
layout_mode = 2
text = "Output Class Name:"

[node name="ClassNamePreviewRichTextLabel" type="RichTextLabel" parent="VBoxContainer/ClassNamePreviewHBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
bbcode_enabled = true
text = "[i]BoolSignalBus[/i]"
scroll_following = true
autowrap_mode = 0
horizontal_alignment = 2

[node name="FilenamePreviewHBoxContainer" type="HBoxContainer" parent="VBoxContainer"]
layout_mode = 2

[node name="FilenamePreviewTextLabel" type="Label" parent="VBoxContainer/FilenamePreviewHBoxContainer"]
layout_mode = 2
text = "Output File:"

[node name="FilenamePreviewRichTextLabel" type="RichTextLabel" parent="VBoxContainer/FilenamePreviewHBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
bbcode_enabled = true
text = "[i]res://scripts/custom_signal_buses/bool_signal_bus.gd[/i]"
scroll_following = true
autowrap_mode = 0
horizontal_alignment = 2

[node name="EmptySpace3" type="Control" parent="VBoxContainer"]
custom_minimum_size = Vector2(0, 32)
layout_mode = 2

[node name="CreateScriptButton" type="Button" parent="VBoxContainer"]
layout_mode = 2
text = "Create Script"
icon = ExtResource("1_qvtpa")

[node name="ErrorMessageDisplay" type="RichTextLabel" parent="VBoxContainer"]
visible = false
layout_mode = 2
bbcode_enabled = true
text = "[color=red]Save Path cannot be empty[/color]"
fit_content = true
scroll_active = false

[node name="ParametersValidator" type="Node" parent="."]
script = ExtResource("4_x7jcq")

[node name="FileSystemScanner" type="Node" parent="."]
script = ExtResource("5_nbh7k")

[connection signal="file_system_scan_requested" from="." to="FileSystemScanner" method="_on_custom_signal_bus_script_creator_file_system_scan_requested"]
[connection signal="initial_save_path_requested" from="." to="VBoxContainer/SavePathEditor" method="_on_custom_signal_bus_script_creator_initial_save_path_requested"]
[connection signal="save_path_changed" from="VBoxContainer/SavePathEditor" to="ParametersValidator" method="_on_save_path_editor_save_path_changed"]
[connection signal="arguments_changed" from="VBoxContainer/ArgumentsVariantTypesEditor" to="ParametersValidator" method="_on_arguments_variant_types_editor_arguments_changed"]
[connection signal="pressed" from="VBoxContainer/CreateScriptButton" to="." method="_on_create_script_button_pressed"]
[connection signal="error_encountered" from="ParametersValidator" to="VBoxContainer/ErrorMessageDisplay" method="set_text"]
[connection signal="preview_class_name_changed" from="ParametersValidator" to="VBoxContainer/ClassNamePreviewHBoxContainer/ClassNamePreviewRichTextLabel" method="set_text"]
[connection signal="preview_filename_changed" from="ParametersValidator" to="VBoxContainer/FilenamePreviewHBoxContainer/FilenamePreviewRichTextLabel" method="set_text"]
[connection signal="preview_signal_signature_changed" from="ParametersValidator" to="VBoxContainer/SignalSignaturePreviewHBoxContainer/SignalSignaturePreviewRichTextLabel" method="set_text"]
[connection signal="script_creation_disabled" from="ParametersValidator" to="VBoxContainer/CreateScriptButton" method="set_disabled"]
[connection signal="script_creation_disabled" from="ParametersValidator" to="VBoxContainer/ErrorMessageDisplay" method="set_visible"]
[connection signal="file_system_changed" from="FileSystemScanner" to="ParametersValidator" method="_on_file_system_scanner_file_system_changed"]
